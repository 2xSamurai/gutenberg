/*
General structure. I'll delete this at some point. -shaun

block-editor-block-navigation__container
	block-editor-block-navigation-tree
		div
			block-editor-block-navigation-leaf
				block-editor-block-navigation-block__contents-cell
					block-editor-block-navigation-block__contents-container
						block-editor-block-navigation-block-contents (block-editor-block-navigation-block-select-button)
							block-editor-block-icon
							(text - block label)
							block-editor-block-navigation-block-select-button__description
				block-editor-block-navigation-block__mover-cell
					components-button block-editor-block-mover-button is-up-button has-icon
				block-editor-block-navigation-block__mover-cell
					components-button block-editor-block-mover-button is-down-button has-icon
*/

// The root container for the tree.
.block-editor-block-navigation__container {
	min-width: $sidebar-width;
}

// Each row within the tree.
.block-editor-block-navigation-leaf {
	position: relative;
	border-radius: 2px;
	border: 1px solid transparent;

	// Hide block options by default. We use opacity so
	// you can still use the keyboard to navigate.
	.block-editor-block-navigation-block__options-cell {
		opacity: 0;
	}

	&:hover {
		border: 1px solid var(--wp-admin-theme-color);

		// Descender indicators are darker when the row has
		// focus or is hovered.
		.block-editor-block-navigator-descender-line {
			border-left-color: $gray-900;
		}

		// Show the block options when the row is hovered.
		.block-editor-block-navigation-block__options-cell {
			opacity: 1;
		}
	}

	&:focus-within {
		border: 1px solid $gray-200;

		// Show the block options when any element in
		// the row is focused.
		.block-editor-block-navigation-block__options-cell {
			opacity: 1;
		}
	}

	&.is-selected,
	&.is-selected:hover {
		&,
		.block-editor-block-navigation-block-contents,
		.block-editor-block-navigation-block__options-cell .components-button {
			background: $gray-900;
			color: $white;
		}

		.block-editor-block-navigator-descender-line {
			border-left-color: $white;
		}

		// Always show the options for the selected block.
		.block-editor-block-navigation-block__options-cell {
			opacity: 1;
		}
	}
}

// The main block button, containing the block icon
// and label. Pressing this selects the block.
.block-editor-block-navigation-block-contents {
	width: 100%;
	position: relative;

	.block-editor-block-icon {
		margin-right: $grid-unit-15;
	}

	&:hover {
		color: $gray-900;
	}
}

// The block options, including the movers and more menu.
.block-editor-block-navigation-block__options-cell {
	position: absolute;
	top: 0;
	right: 0;
}

// This is used to indent nested blocks. They stack
// as nesting increases, creating a larger indentation.
.block-editor-block-navigator-descender-line {
	position: relative;
	flex-shrink: 0;
	width: 2px;
	height: 2px;
	border-left: 2px solid $gray-700;
	margin: 0 6px 0;
}

// Hide block number and level description. (i.e. Block 2 of
// 3, Level 2). This is mostly useful for screen readers.
.block-editor-block-navigation-block-slot__description,
.block-editor-block-navigation-block-select-button__description,
.block-editor-block-navigation-appender__description {
	display: none;
}
